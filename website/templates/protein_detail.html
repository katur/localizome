{% extends "matrix_full.html" %}


{% block prematrix %}
	<!-- PROTEIN TITLE BAR -->
	<div id="protein-title-bar" class="increase-line-height">
		<!-- protein title on left -->
		<h3>{{ protein.common_name|upper }}</h3>
		
		<!-- sequence and wormbase link on right -->
		<div id="protein-subtitle">
			{% if protein.sequence != protein.common_name %}
				Cosmid: {{ protein.sequence }}
			{% endif %}

			{% if protein.sequence != protein.common_name and protein.wormbase_id %}
				<br>
			{% endif %}

			{% if protein.wormbase_id %}
				<a href="http://www.wormbase.org/species/c_elegans/gene/{{ protein.wormbase_id }}" target="_blank">
					{{ protein.wormbase_id}}
				</a>
			{% endif %}
		</div>
		
		<!-- navigation bar for the videos -->
		<ul class="video-nav">
			{% for video in videos %}
				<li>
					<a href="#" data-video-link="{{ video.id }}"
						{% if video = representative_video %}
							data-video-representative="true"
						{% endif %}
					>
						movie {{ video.movie_number }}
					</a>	
				</li>
			{% endfor %}
			
			{# "merge" would be the first element in the last matrix appended to the list #}
			{% if matrices|last|first == 'merge' %} 
				<li>
					<a href="#" data-video-link="merge">merge (matrix only)</a>
				</li>
			{% endif %}	
		</ul>
	</div>
	
	<!-- VIDEO AREA -->
	{% for video in videos %}
		<!-- wrapper for the entire video area including summary -->
		<div class="video-summary-wrapper" data-video-content="{{ video.id}}">
			<!-- wrapper for the video and meta data beneath the video -->
			<div class="video-wrapper">	
				<!-- video player itself -->
				<div class="leanback-player-video">
					<video width="458" height="312" preload="metadata" controls>
						<source src="{{ STATIC_URL }}videos/nathalie.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
						<source src="{{ STATIC_URL }}videos/nathalie.ogv" type='video/ogg; codecs="theora, vorbis"'/>
						
						<!-- Flash-Fallback -->
						<object class="leanback-player-flash-fallback" width="458" height="312">
						</object>
																					 
						<!-- HTML-Fallback - Download Links -->
						<div class="leanback-player-html-fallback">
							<img src="{{ STATIC_URL }}images/ee-logo.png" width="458" height="312" alt="Poster Image" 
								title="No HTML5 media playback capabilities available.">
							<div>
								<strong>Download Video:</strong>
								<a href="{{ STATIC_URL }}videos/nathalie.mp4">.mp4</a>,
								<a href="{{ STATIC_URL }}videos/nathalie.ogv">.ogv</a>
							</div>
						</div>
					</video>
				</div>
				
				<!-- meta data beneath video -->
				<div class="video-info">
					<div class="video-info-left">
						Lens: {{ video.lens }}
						<br>
						Mode: {{ video.mode }}
					</div>
					<div class="video-info-right">
						Filmed {{ video.date_filmed }}
						<br>
						<a class="video-download" href={{ STATIC_URL }}videos/{{ video.filename }}>Download</a>
					</div>
				</div>
			</div> <!-- video-wrapper -->

			<!-- info next to video, including summary -->
			<div id="next-to-video" class="increase-line-height-a-lot">
				<ul>
					<li>
						<b>Strain:</b> {{ video.strain_name }}
					</li>
					{% if video.vector %}
						<li>
							<b>Vector:</b> {{ video.vector }}</li>
						</li>
					{% endif %}			

					{% if video.truncated_summary %}
						<li>
							<div class="summary-collapsed">
								<b>Summary:</b> {{ video.truncated_summary }}&hellip;
								<a class="toggle-summary shaded-box">
									more
								</a>
							</div>
							
							<div class="summary-expanded invisible">
								<b>Summary:</b> {{ video.summary }}
								<a class="toggle-summary shaded-box">
									less
								</a>
							</div>
						</li>
					{% else %}
						<li>
							<b>Summary:</b> {{ video.summary }}
						</li>
					{% endif %}
				</ul>
			</div>
		</div> <!-- video-summary-wrapper -->		
		{% endfor %} {# video loop #}
{% endblock prematrix %}


{% block next_to_matrix %}
	<div id="next-to-matrix" class="shaded-box">
		{% include "matrix_key_normal.html" %}

		{% for video in videos %}
			<ul class="below-key increase-line-height-a-lot" data-video-content="{{ video.id }}">
				<li>Scored {{ video.date_scored }}</li>
				<li>Excel sheet: {{ video.excel_id }}</li>	
			</ul>			
		{% endfor %}
	</div>
{% endblock next_to_matrix %}
