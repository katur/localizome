{% extends "matrix_full.html" %}

{% block prematrix %}

	<div id="next-to-video">
		<h3>{{ protein.common_name|upper }}</h3>
		<div id="below-protein-name" class="increase-line-height-a-lot">
			{% if protein.sequence != protein.common_name %}
				<span class="full-span">Sequence: {{ protein.sequence }}</span>
			{% endif %}
			
			{% if protein.wormbase_id %}
				<span class="full-span">WormBase gene ID: 
				<a href="http://www.wormbase.org/species/c_elegans/gene/{{ protein.wormbase_id }}" target="_blank">
					{{ protein.wormbase_id}}
				</a></span>
			{% endif %}

			<span class="full-span">&nbsp;</span>

			<span class="full-span">
				Select a link below to view a movie and its corresponding matrix:

			<ul class="inline">
				{% for video in videos %}
					<li class="right-padding">
						<a href="#" data-matrix-link="{{ video.id }}">movie {{ video.movie_number }}</a>	
					</li>
				{% endfor %}
				
				{% if matrices|last|first == 'merge' %} {# "merge" would be the first element in the last matrix appended to the list #}
					<li>
						<a href="#" data-matrix-link="merge">merge (matrix only)</a>
					</li>
				{% endif %}	
			</ul>

			<span class="full-span">&nbsp;</span>
			{% for video in videos %}
				<div data-matrix-info="{{ video.id }}">
					<span class="full-span"><a href={{ STATIC_URL }}videos/{{ video.filename }}>Click here to download movie {{ video.movie_number }}</a></span>
				</div>
			{% endfor %}
		</div>
	</div>
	
	<div class="video-wrapper">
		<div class="flowplayer no-volume no-mute" data-swf="{{ STATIC_URL }}swf/flowplayer.swf" data-ratio="0.7">
			<video <!--poster="{{ STATIC_URL }}images/squirrel.jpeg"-->>
			<!--<source type="video/webm" src="http://stream.flowplayer.org/bauhaus/624x260.webm"/>-->
			<source type="video/mp4" src="{{ STATIC_URL }}videos/nathalie.mp4"/>
			<!--<source type="video/ogv" src="http://stream.flowplayer.org/bauhaus/624x260.ogv"/>-->
			</video>
		</div>
	</div>
{% endblock prematrix %}


{% block next_to_matrix %}
	<div id="next-to-matrix">
		{% include "matrix_key_normal.html" %}

		{% for video in videos %}
			<ul class="below-key full-width increase-line-height-a-lot" data-matrix-info="{{ video.id }}">
				<li>Strain: {{ video.strain_name }}</li>
				{% if video.vector %}
					<li>Vector: {{ video.vector }}</li>
				{% endif %}			
				<li>Filmed {{ video.date_filmed }}</li>
				<li class="tiny indent">Lens: {{ video.lens }}</li>
				<li class="tiny indent">Mode: {{ video.mode }}</li>
				<li>Scored {{ video.date_scored }}</li>
				<li>Excel sheet: {{ video.excel_id }}</li>	
			</ul>			
		{% endfor %}
	</div>
{% endblock next_to_matrix %}


{% block below_matrix %}
	{% for video in videos %}
		<div data-matrix-summary="{{ video.id }}" {% if video == representative_video %} data-matrix-summary-rep="{{ video.id }}"{% endif %}>
			<h4>Summary</h4>
			{{ video.summary }}
		</div>
	{% endfor %}
{% endblock below_matrix %}
